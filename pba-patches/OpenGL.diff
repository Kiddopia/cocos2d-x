From cc5dab6857f4093fb726880a9d0139aa6942c66b Mon Sep 17 00:00:00 2001
From: Kaushik <kaushik@paperboatapps.com>
Date: Tue, 4 Feb 2020 10:57:19 +0530
Subject: [PATCH] [fix] crash by checking if director OpenGL view and EAGL view
 is initialized

---
 cocos/platform/ios/CCDirectorCaller-ios.mm | 3 +++
 1 file changed, 3 insertions(+)

diff --git a/cocos/platform/ios/CCDirectorCaller-ios.mm b/cocos/platform/ios/CCDirectorCaller-ios.mm
index 14d39d9cc9..6bcb727f68 100644
--- a/cocos/platform/ios/CCDirectorCaller-ios.mm
+++ b/cocos/platform/ios/CCDirectorCaller-ios.mm
@@ -136,6 +136,9 @@ static id s_sharedDirectorCaller;
 {
     if (isAppActive) {
         cocos2d::Director* director = cocos2d::Director::getInstance();
+        // crash fix for issue 4ae87db29b5fcdf074a6c59740a782f5
+        if(!director->getOpenGLView() || !director->getOpenGLView()->getEAGLView())
+            return;
         EAGLContext* cocos2dxContext = [(CCEAGLView*)director->getOpenGLView()->getEAGLView() context];
         if (cocos2dxContext != [EAGLContext currentContext])
             glFlush();
-- 
2.31.0

